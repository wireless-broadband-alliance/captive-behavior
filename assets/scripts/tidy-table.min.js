!function(){"use strict";var h=null,t={init:function(e,t){var n=this,c=n.data,o={enableCheckbox:!1,enableMenu:!1,reverseSortDir:!1,responsive:!1};return 1<arguments.length?Object.assign(o,e):t=e,t=Object.assign({sortByPattern:function(e,t){if(void 0!==e&&void 0!==t)return String(t).replace(/$|%|#/g,"")}},t),void 0===c&&(n.data={settings:o,config:t}),o.responsive&&(n.className="tidy_table media"),n.TidyTable("_createTable")},destroy:function(){this.remove()},_createTable:function(a,r){var l=this,d=l.data;(h=document.createElement("table")).className="tidy_table";var u=document.createElement("thead"),f=document.createElement("tbody"),i=null;!function(){i=d.config.columnTitles;for(var e=document.createElement("tr"),t=0;t<i.length;t++){var n,c=i[t],o=document.createElement("th");o.appendChild(document.createTextNode(c)),o.setAttribute("title",c),e.appendChild(o),d.settings.reverseSortDir?"desc"!=r&&r?(n="sort_desc",o.order="desc"):(n="sort_asc",o.order="asc"):"asc"!=r&&r?(n="sort_desc",o.order="asc"):(n="sort_asc",o.order="desc"),a==t&&(o.className=n),o.index=t,o.addEventListener("click",function(){l.TidyTable("_sortByColumn",this.index,a==this.index?this.order:"asc")},!1)}u.appendChild(e)}(),function(){for(var e=d.config.columnValues,t=null,n=0;n<e.length;n++){for(var c=document.createElement("tr"),o=0;o<e[n].length;o++){var a=e[n][o];(t=document.createElement("td")).appendChild(document.createTextNode(a)),t.setAttribute("title",a),c.appendChild(t),d.config.postProcess&&"function"==typeof d.config.postProcess.column&&d.config.postProcess.column(t)}f.appendChild(c)}if(h.appendChild(u),h.appendChild(f),d.settings&&d.settings.enableCheckbox)for(var r=h.querySelectorAll("tr"),i=0;i<r.length;i++){var s=document.createElement("input");s.setAttribute("type","checkbox"),0===(s.index=i)?(t=document.createElement("th"),s.addEventListener("click",function(){l.TidyTable("_toggleSelRows",r)})):(t=document.createElement("td"),s.addEventListener("click",function(){l.TidyTable("_toggleSelRows",r,this.index)})),t.appendChild(s),r[i].insertBefore(t,r[i].firstChild)}}(),d.config.postProcess&&"function"==typeof d.config.postProcess.table&&d.config.postProcess.table(h);var e=l.querySelector("table.tidy_table");return e?e.parentNode.replaceChild(h,e):(d.settings&&d.settings.enableMenu&&l.appendChild(l.TidyTable("_createMenu","options")),l.appendChild(h)),h},_createMenu:function(e){var t=this,n=t.data,c=document.createElement("select");c.className="tidy_table "+e,c.addEventListener("change",function(){var e=n.config.menuOptions[this.value][1].callback;"function"==typeof e&&e(t.TidyTable("_getCheckedAsObj")),this.value=0});for(var o=0;o<n.config.menuOptions.length;o++){var a=document.createElement("option");a.text=n.config.menuOptions[o][0],a.value=o,c.appendChild(a)}return n.config.postProcess&&"function"==typeof n.config.postProcess.menu&&n.config.postProcess.menu(c),c},_getCheckedAsObj:function(){for(var e=this.querySelectorAll("tbody > tr"),t=[],n=0;n<e.length;n++){var c=e[n].childNodes;if(c[0].firstChild.checked){for(var o=[],a=1;a<c.length;a++)o[a-1]=c[a].textContent;t.push(o)}}return t},_toggleSelRows:function(e,t){for(var n=null,c=0;c<e.length;c++){var o=e[c],a=o.querySelector("input[type=checkbox]");if(t){if(0===c)continue;!0===a.checked?(o.className=o.className?o.className.replace(/check_off/,"check_on"):"check_on",a.checked=!0):(o.className=o.className.replace(/check_on/,"check_off"),a.checked=!1)}else{if(0===c){n=a.checked;continue}n?(o.className=o.className?o.className.replace(/check_off/,"check_on"):"check_on",a.checked=!0):(o.className=o.className.replace(/check_on/,"check_off"),a.checked=!1)}}},_sortByColumn:function(r,e){var i=this.data;if("function"==typeof i.config.sortByPattern){var s="desc"==e?-1:1;i.config.columnValues.sort(function(e,t){var n,c,o=i.config.sortByPattern(r,e[r]),a=i.config.sortByPattern(r,t[r]);return isNaN(o)?[s*l(o,a)]>[s*l(a,o)]?-1:1:[s*(n=o,c=a,c-n)]})}this.TidyTable("_createTable",r,e)}};function l(e,t){return t<e?1:e<t?-1:0}Element.prototype.TidyTable=function(e){if(t[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof e&&e)throw new Error("Method "+e+" does not exist in TidyTable");return t.init.apply(this,arguments)}}();
